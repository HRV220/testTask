# Notes API

## Описание

Это REST API для управления заметками. Пользователи могут регистрироваться, авторизовываться, создавать, получать, обновлять и удалять заметки. Каждая заметка может быть связана с тегом.

## Технологии

- Node.js
- Express.js
- PostgreSQL
- Sequelize ORM- Express Validator
- Dotenv
- Bcrypt
- Swagger
- JWT (JSON Web Tokens)
- Swagger

## Установка

1.  Клонируйте репозиторий:

    ```bash
    git clone https://github.com/HRV220/testTask.git
    ```

2.  Перейдите в директорию проекта:

    ```bash
    cd testTask
    ```

3.  Установите зависимости:

    ```bash
    npm install
    ```

4.  Создайте файл `.env` в корне проекта и заполните его данными для подключения к базе данных:

    ```
    DB_HOST=localhost
    DB_USER=admin
    DB_PASSWORD=admin
    DB_NAME=notes
    DB_DIALECT=postgres
    DB_LOGGING=true
    ```

5.  Запустите приложение:

    ```bash
    npm start
    ```

## API

### Регистрация

- **Метод:** `POST`
- **URL:** `/auth/registration`
- **Тело запроса:**

  ```json
  {
    "login": "user_login",
    "password": "user_password",
    "confirmedPassword": "user_password"
  }
  ```

- **Ответ:**

  - `201 Created`: Пользователь успешно зарегистрирован.
  - `400 Bad Request`: Ошибка валидации данных.
  - `500 Internal Server Error`: Ошибка на сервере.

### Авторизация

- **Метод:** `POST`
- **URL:** `/auth/login`
- **Тело запроса:**

  ```json
  {
    "login": "user_login",
    "password": "user_password"
  }
  ```

  **Ответ:**

  - `200 OK`: Успешная авторизация, возвращается JWT токен.
  - `400 Bad Request`: Ошибка валидации данных.
  - `500 Internal Server Error`: Ошибка на сервере.

### Заметки

- **Получение всех заметок**

  - **Метод:** `GET`
  - **URL:** `/notes/getNotes`
  - **Заголовок:** `Authorization: Bearer <token>`
  - **Параметры запроса:**
    - `title` (опционально): Фильтр по названию заметки.
    - `tag` (опционально): Фильтр по тегу заметки.
  - **Ответ:**
    - `200 OK`: Успешный ответ со списком заметок.
    - `401 Unauthorized`: Неавторизованный доступ.

- **Получение одной заметки по ID**

  - **Метод:** `GET`
  - **URL:** `/notes/getNote/{id}`
  - **Заголовок:** `Authorization: Bearer <token>`
  - **Параметры запроса:**
    - `id`: ID заметки.
  - **Ответ:**
    - `200 OK`: Успешный ответ с данными заметки.
    - `404 Not Found`: Заметка не найдена.
    - `401 Unauthorized`: Неавторизованный доступ.

- **Обновление заметки**

  - **Метод:** `PUT`
  - **URL:** `/notes/updateNote/{id}`
  - **Заголовок:** `Authorization: Bearer <token>`
  - **Параметры запроса:**
    - `id`: ID заметки.
  - **Тело запроса:**

    ```json
    {
      "title": "Обновленное название",
      "text": "Обновленный текст",
      "tag": "Обновленный тег"
    }
    ```

- **Создание заметки**

  - **Метод:** `POST`
  - **URL:** `/notes/createNote`
  - **Заголовок:** `Authorization: Bearer <token>`
  - **Тело запроса:**

    ```json
    {
      "title": "Название заметки",
      "text": "Текст заметки",
      "tag": "Название тега"
    }
    ```

- **Удаление заметки**

  - **Метод:** `DELETE`
  - **URL:** `/notes/deleteNote/{id}`
  - **Заголовок:** `Authorization: Bearer <token>`
  - **Параметры запроса:**
    - `id`: ID заметки.
  - **Ответ:**
    - `200 OK`: Заметка успешно удалена.
    - `404 Not Found`: Заметка не найдена.
    - `401 Unauthorized`: Неавторизованный доступ.

### Теги

- **Создание тега**

  - **Метод:** `POST`
  - **URL:** `/tags/createTag`
  - **Заголовок:** `Authorization: Bearer <token>`
  - **Тело запроса:**

    ```json
    {
      "name": "Название тега"
    }
    ```

- **Получение всех тегов**

  - **Метод:** `GET`
  - **URL:** `/tags/getTags`
  - **Заголовок:** `Authorization: Bearer <token>`
  - **Ответ:**
    - `200 OK`: Успешный ответ со списком тегов.
    - `401 Unauthorized`: Неавторизованный доступ.

- **Получение одного тега по ID**

  - **Метод:** `GET`
  - **URL:** `/tags/getTag/{id}`
  - **Заголовок:** `Authorization: Bearer <token>`
  - **Параметры запроса:**
    - `id`: ID тега.
  - **Ответ:**
    - `200 OK`: Успешный ответ с данными тега.
    - `404 Not Found`: Тег не найден.
    - `401 Unauthorized`: Неавторизованный доступ.

## Swagger

Для просмотра документации API используйте Swagger UI, который доступен по адресу: `http://localhost:3000/api-docs`.

## Запуск приложения

Для запуска приложения выполните следующие шаги:

1.  Убедитесь, что у вас установлен Node.js и npm.
2.  Установите PostgreSQL и создайте базу данных.
3.  Заполните файл `.env` данными для подключения к базе данных.
4.  Запустите приложение командой `npm start`.

После запуска приложения вы сможете использовать API через Swagger UI или отправляя запросы напрямую.
